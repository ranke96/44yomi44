<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>日麻對決戰績</title>
  <style>
body {
  font-family: "Noto Sans TC", sans-serif;
  background: linear-gradient(135deg, #f0f4ff, #fff);
  margin: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #222;
  padding: 40px 20px;
  transition: background 0.5s, color 0.5s;
}

body.dark-mode {
  background: linear-gradient(135deg, #222, #444);
  color: #eee;
}

h1 {
  font-size: 2.2em;
  margin-bottom: 50px;
}

.battle-container {
  position: relative;
  width: 800px;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 140px;
}

.avatar-left, .avatar-right {
  position: absolute;
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #888;
  top: 10px;
  cursor: pointer;
  transition: transform 0.2s;
}

.avatar-left:hover, .avatar-right:hover {
  transform: scale(1.05);
}

.avatar-left { left: 0; }
.avatar-right { right: 0; }

.score-box {
  font-size: 3em;
  font-weight: bold;
  text-align: center;
  animation: fadeInBounce 1s forwards;
  max-width: 600px;
  word-wrap: break-word;
}

@keyframes fadeInBounce {
  0% { opacity: 0; transform: translateY(-20px); }
  60% { opacity: 1; transform: translateY(10px); }
  80% { transform: translateY(-5px); }
  100% { transform: translateY(0); }
}

#update {
  text-align: center;
  margin-top: 20px;
  color: #666;
  font-size: 0.9em;
}

/* 手動切換深色模式按鈕 */
#darkModeBtn {
  margin-top: 20px;
  padding: 6px 12px;
  font-size: 1.5em;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background: none;
}

/* 社群圖示連結 */
.social-links {
  margin-top: 30px;
  display: flex;
  gap: 20px;
}

.social-links img {
  width: 40px;
  height: 40px;
  cursor: pointer;
  transition: transform 0.2s;
}

.social-links img:hover {
  transform: scale(1.1);
}

/* 手機版調整 */
@media (max-width: 600px) {
  .battle-container {
    width: 100%;
    height: 200px;
  }

  .avatar-left {
    width: 80px;
    height: 80px;
    top: -30px;
    left: 0;
  }

  .avatar-right {
    width: 80px;
    height: 80px;
    bottom: -30px;
    right: 0;
    top: auto;
  }

  .score-box {
    font-size: 2em;
    max-width: calc(100% - 20px);
    margin: 0 auto;
  }

  h1 {
    font-size: 1.8em;
    margin-bottom: 30px;
  }

  .social-links img {
    width: 30px;
    height: 30px;
  }
}
/* 圖示樣式 */
.social-links {
  margin-top: 30px;
  display: flex;
  gap: 20px;
}

.social-icon {
  width: 40px;
  height: 40px;
  cursor: pointer;
  transition: transform 0.2s, fill 0.3s;
  fill: #000; /* 預設淺色模式黑色 */
}

.social-icon:hover {
  transform: scale(1.1);
}

/* 深色模式改白色 */
body.dark-mode .social-icon {
  fill: #fff;
}

/* 手機版縮小 */
@media (max-width: 600px) {
  .social-icon {
    width: 30px;
    height: 30px;
  }
}
  </style>
</head>
<body>
  <h1>日麻對決戰績</h1>

  <div class="battle-container">
    <img id="streamerAvatar" class="avatar-left" src="44.webp" alt="實況主">
    <div id="score" class="score-box">讀取中...</div>
    <img id="viewerAvatar" class="avatar-right" src="snow.webp" alt="觀眾">
  </div>


  <!-- 社群連結 -->
<div class="social-links">
  <a href="https://x.com/44yomi44" target="_blank">
    <svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231L18.244 2.25zM17.633 19.77h1.949L7.126 4.227h-2.15l12.657 15.543z"/>
    </svg>
  </a>
  <a href="https://www.twitch.tv/44yomi44" target="_blank">
    <svg class="social-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0h1.714v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714z"/>
    </svg>
  </a>
</div>
    
  <p id="update"></p>
  <button id="darkModeBtn" title="切換深色模式">🌞</button>

  <script>
    // 隨機名字清單
    const streamerNames = ["四巳", "四己", "四已"];
    const viewerNames = ["小雪", "小鱈","雪雪小雪","雪雪小筱","曉雪","小筱"];

    const randomStreamer = streamerNames[Math.floor(Math.random() * streamerNames.length)];
    const randomViewer = viewerNames[Math.floor(Math.random() * viewerNames.length)];

    fetch('score.json')
      .then(response => response.json())
      .then(data => {
        const scoreText = `${randomStreamer} ${data.streamer} : ${data.viewer} ${randomViewer}`;
        const scoreDiv = document.getElementById('score');
        scoreDiv.textContent = scoreText;

        // 重新觸發動畫
        scoreDiv.style.animation = 'none';
        scoreDiv.offsetHeight;
        scoreDiv.style.animation = 'fadeInBounce 1s forwards';

        document.getElementById('update').textContent = `最後更新：${data.last_update}`;
        document.title = `日麻對決戰績`;
      })
      .catch(() => {
        document.getElementById('score').textContent = '無法讀取戰績資料';
      });

    // 深色模式按鈕
    const darkModeBtn = document.getElementById('darkModeBtn');

    // 自動偵測系統深色模式
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if(prefersDark) {
      document.body.classList.add('dark-mode');
      darkModeBtn.textContent = '🌙';
    } else {
      document.body.classList.remove('dark-mode');
      darkModeBtn.textContent = '🌞';
    }

    // 點擊切換模式
    darkModeBtn.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      if(document.body.classList.contains('dark-mode')){
        darkModeBtn.textContent = '🌙';
      } else {
        darkModeBtn.textContent = '🌞';
      }
    });

    // 實況主頭像音效
    const streamerAvatar = document.getElementById('streamerAvatar');
    const sounds = [
      'https://cdn.jsdelivr.net/gh/ranke96/44yomi44@main/mahjong/1.wav',
      'https://cdn.jsdelivr.net/gh/ranke96/44yomi44@main/mahjong/2.wav',
      'https://cdn.jsdelivr.net/gh/ranke96/44yomi44@main/mahjong/3.wav',
      'https://cdn.jsdelivr.net/gh/ranke96/44yomi44@main/mahjong/4.wav',
      'https://cdn.jsdelivr.net/gh/ranke96/44yomi44@main/mahjong/5.wav'
    ];
    streamerAvatar.addEventListener('click', () => {
      const randomSound = sounds[Math.floor(Math.random() * sounds.length)];
      const audio = new Audio(randomSound);
      audio.play();
    });
  </script>
</body>
</html>
